# MLM 계층 트리 시각화 도구

MLM(다단계 마케팅) 이진트리 구조를 시각화하는 도구입니다.

## 파일 구성

- `generate_tree.js` - MongoDB에서 사용자 데이터를 읽어 DOT 형식으로 변환
- `draw_tree.sh` - 전체 과정을 자동화하는 쉘 스크립트
- `output/` - 생성된 이미지 파일들이 저장되는 디렉토리

## 사용 방법

```bash
# 실행 권한 부여
chmod +x draw_tree.sh

# 트리 생성 및 시각화
./draw_tree.sh
```

## 생성되는 파일

- `mlm_tree.png` - PNG 이미지 (일반 뷰어용)
- `mlm_tree.svg` - SVG 벡터 이미지 (확대/축소 가능)
- `mlm_tree.pdf` - PDF 문서 (인쇄용)
- `mlm_tree.dot` - Graphviz DOT 소스 파일

## 필요 조건

- MongoDB가 실행 중이어야 함
- `nanumpay` 데이터베이스에 사용자 데이터 존재
- Graphviz 패키지 (자동 설치됨)

## 특징

- 계층별 레벨 구분
- 각 노드에 이름과 등급 표시
- 실제 부모-자식 관계 반영
- 등급별 통계 정보 출력

## 등급 계산 룰

MLM 등급은 이진트리 구조를 기반으로 계산됩니다:

- **F1-F4**: 좌우 서브트리에 각각 해당 등급이 최소 1개씩 존재
- **F5-F8**: 좌우 서브트리의 특정 등급이 **최소 2:1 조건** (총 3개 이상)

자세한 등급 계산 룰은 `MLM_RULES.md` 파일을 참조하세요.

**중요**: F5부터의 2:1은 정확한 비율이 아닌 최소 조건입니다. (예: 3:2도 만족)