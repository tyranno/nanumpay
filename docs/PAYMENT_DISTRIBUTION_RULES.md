# MLM 매출 지급 방안 상세 설명서

## 1. 기본 원칙

### 1.1 매출과 지급의 관계
- **매출 발생**: N월에 신규 용역자 등록 (1인당 100만원)
- **지급 시작**: N+1월 1주차부터
- **지급 기간**: 10주간 분할 지급 (약 2.5개월)
- **등급 고정**: 매출 발생 시점의 등급으로 10회 내내 고정

### 1.2 핵심 특징
- ✅ **선등록 후지급**: 이번 달 등록 → 다음 달부터 지급
- ✅ **10회 분할**: 총 지급액을 10등분하여 매주 지급
- ✅ **중첩 지급**: 매달 발생한 매출이 중첩되어 지급
- ✅ **등급 고정**: 매출 시점 등급으로 지급액 확정

## 2. 등급별 지급 비율

### 2.1 기본 비율
```
F1: 총매출의 24%
F2: 총매출의 19%
F3: 총매출의 14%
F4: 총매출의 9%
F5: 총매출의 5%
F6: 총매출의 3%
F7: 총매출의 2%
F8: 총매출의 1%
```

### 2.2 누적식 배분 계산
```
F1 개인 지급액 = (총매출 × 24%) ÷ (F1인원 + F2인원)
F2 개인 지급액 = (총매출 × 19%) ÷ (F2인원 + F3인원) + F1 지급액
F3 개인 지급액 = (총매출 × 14%) ÷ (F3인원 + F4인원) + F2 지급액
F4 개인 지급액 = (총매출 × 9%) ÷ (F4인원 + F5인원) + F3 지급액
F5 개인 지급액 = (총매출 × 5%) ÷ (F5인원 + F6인원) + F4 지급액
F6 개인 지급액 = (총매출 × 3%) ÷ (F6인원 + F7인원) + F5 지급액
F7 개인 지급액 = (총매출 × 2%) ÷ (F7인원 + F8인원) + F6 지급액
F8 개인 지급액 = (총매출 × 1%) ÷ F8인원 + F7 지급액
```

## 3. 실제 계산 예시

### 3.1 시나리오 설정
**9월 상황:**
- 신규 등록: 10명
- 총매출: 10명 × 100만원 = **1,000만원**
- 등급 분포:
  - F1: 50명
  - F2: 10명
  - F3: 4명
  - F4: 2명

### 3.2 등급별 지급액 계산

#### F1 등급 (50명)
```
기본액 = 1,000만원 × 24% = 240만원
개인당 = 240만원 ÷ (50명 + 10명) = 240만원 ÷ 60명 = 4만원
10회 분할 = 4만원 ÷ 10회 = 회차당 4,000원
```

#### F2 등급 (10명)
```
기본액 = 1,000만원 × 19% = 190만원
개인당 = 190만원 ÷ (10명 + 4명) = 190만원 ÷ 14명 = 135,714원
누적 = 135,714원 + 40,000원(F1) = 175,714원
10회 분할 = 175,714원 ÷ 10회 = 회차당 17,571원
```

#### F3 등급 (4명)
```
기본액 = 1,000만원 × 14% = 140만원
개인당 = 140만원 ÷ (4명 + 2명) = 140만원 ÷ 6명 = 233,333원
누적 = 233,333원 + 175,714원(F2) = 409,047원
10회 분할 = 409,047원 ÷ 10회 = 회차당 40,905원
```

#### F4 등급 (2명)
```
기본액 = 1,000만원 × 9% = 90만원
개인당 = 90만원 ÷ 2명 = 450,000원
누적 = 450,000원 + 409,047원(F3) = 859,047원
10회 분할 = 859,047원 ÷ 10회 = 회차당 85,905원
```

## 4. 10주 분할 지급 스케줄

### 4.1 지급 일정표
```
9월 매출 → 10월부터 지급 시작

├─ 10월 (4주)
│  ├─ 1주차: 1회차 지급
│  ├─ 2주차: 2회차 지급
│  ├─ 3주차: 3회차 지급
│  └─ 4주차: 4회차 지급
│
├─ 11월 (4주)
│  ├─ 1주차: 5회차 지급
│  ├─ 2주차: 6회차 지급
│  ├─ 3주차: 7회차 지급
│  └─ 4주차: 8회차 지급
│
└─ 12월 (2주)
   ├─ 1주차: 9회차 지급
   └─ 2주차: 10회차 지급 (완료)
```

### 4.2 개인별 지급 예시 (F3 등급 김철수)
```
총 지급액: 409,047원
회차당: 40,905원

10월 1주차: 40,905원 (1/10)
10월 2주차: 40,905원 (2/10)
10월 3주차: 40,905원 (3/10)
10월 4주차: 40,905원 (4/10)
11월 1주차: 40,905원 (5/10)
11월 2주차: 40,905원 (6/10)
11월 3주차: 40,905원 (7/10)
11월 4주차: 40,905원 (8/10)
12월 1주차: 40,905원 (9/10)
12월 2주차: 40,907원 (10/10, 끝수 조정)
────────────────────
총 수령액: 409,047원
```

## 5. 중첩 지급 (여러 달 매출)

### 5.1 3개월 연속 매출 시나리오
```
7월 매출: 1,000만원 → 8월부터 10주 지급
8월 매출: 1,500만원 → 9월부터 10주 지급
9월 매출: 2,000만원 → 10월부터 10주 지급
```

### 5.2 10월 주차별 중첩 지급
```
         7월 매출    8월 매출    9월 매출     합계
        (7~10회차)  (3~6회차)  (1~4회차)
────────────────────────────────────────────────
10월 1주: 7회차  +  3회차  +  1회차  = 주간 총액
10월 2주: 8회차  +  4회차  +  2회차  = 주간 총액
10월 3주: 9회차  +  5회차  +  3회차  = 주간 총액
10월 4주: 10회차 +  6회차  +  4회차  = 주간 총액
```

### 5.3 실제 금액 예시 (F2 등급)
```
7월 지급액: 150,000원 ÷ 10 = 15,000원/회
8월 지급액: 200,000원 ÷ 10 = 20,000원/회
9월 지급액: 175,714원 ÷ 10 = 17,571원/회

10월 1주차 수령액:
- 7월 7회차: 15,000원
- 8월 3회차: 20,000원
- 9월 1회차: 17,571원
- 주간 합계: 52,571원
```

## 6. 지급 흐름도

### 6.1 월별 프로세스
```
[9월]           [9월 말]         [10월~12월]
신규등록  →  매출/등급계산  →  10주 분할지급
 10명          1,000만원         매주 1/10씩
   ↓              ↓                    ↓
DB 저장      지급계획생성         주차별 지급
```

### 6.2 데이터 흐름
```
┌─────────────┐     ┌──────────────┐     ┌──────────────┐
│   Users     │────▶│MonthlyRevenue│────▶│UserPaymentPlan│
│ (용역자등록) │     │  (월별매출)   │     │  (개인지급계획) │
└─────────────┘     └──────────────┘     └──────────────┘
                                                  │
                                                  ▼
                                          ┌──────────────┐
                                          │WeeklyPayment │
                                          │ (주간지급실행) │
                                          └──────────────┘
```

## 7. 원천징수 및 실지급액

### 7.1 원천징수 계산
```
지급액: 40,905원
원천징수(3.3%): 1,350원 (100원 단위 절삭)
실지급액: 39,555원
```

### 7.2 월간 명세서 예시
```
2024년 10월 김철수(F3) 지급 명세

주차    지급액    원천징수   실지급액
────────────────────────────────────
1주차   40,905     1,350     39,555
2주차   40,905     1,350     39,555
3주차   40,905     1,350     39,555
4주차   40,905     1,350     39,555
────────────────────────────────────
합계   163,620     5,400    158,220
```

## 8. 특수 상황 처리

### 8.1 등급 변동
- **원칙**: 매출 발생 시점의 등급으로 고정
- **예시**: 9월 F2 → 10월 F3 승급해도, 9월 매출은 F2 금액으로 10회 지급

### 8.2 신규 가입자
- **원칙**: 이전 매출의 지급 대상 아님
- **예시**: 10월 신규 가입자는 9월 매출 분배 대상 제외

### 8.3 중도 탈퇴
- **원칙**: 확정된 지급 계획은 계속 실행
- **예시**: 10월 탈퇴해도 9월 매출 10회 지급은 완료

## 9. 시스템 구현 포인트

### 9.1 필수 저장 데이터
1. **매출 시점**: 등급, 인원수, 총매출
2. **개인별**: 확정 지급액, 회차별 상태
3. **주차별**: 여러 매출의 회차 합산

### 9.2 조회 최적화
- 주차별 지급 대상자 인덱싱
- 미지급 건 빠른 검색
- 중첩 지급액 효율적 계산

### 9.3 정합성 체크
- 총 지급액 = 총 매출액
- 10회 합계 = 개인별 총 지급액
- 등급별 인원 × 개인 지급액 = 등급별 총액

## 10. 핵심 요약

🔑 **매출 → 계산 → 분할 → 지급**
1. 매월 말 매출 집계 (신규 × 100만원)
2. 등급별 지급액 계산 (누적식)
3. 10회 분할 스케줄 생성
4. 매주 자동 지급 실행

🎯 **장점**
- 안정적인 수익 분배
- 예측 가능한 현금 흐름
- 공정한 기여도 반영
- 등급 상승 동기부여