# 판매인 배치 규칙

## 1. 기본 규칙
- 엑셀에서 "판매인" 항목에 이름을 입력하면 해당 사용자의 하위에 배치됩니다
- 판매인이 "관리자"로 지정된 경우, 관리자 직속 하위에 배치됩니다

## 2. 배치 순서
1. **왼쪽(L) 우선**: 판매인의 왼쪽 자리가 비어있으면 왼쪽에 배치
2. **오른쪽(R) 차선**: 왼쪽이 차있으면 오른쪽에 배치
3. **수동 배치**: 좌우 모두 차있으면 알림 메시지 표시 후 수동 배치 필요

## 3. 엑셀 등록 처리 순서
1. **1단계**: 모든 사용자를 먼저 등록 (부모 관계 없이)
2. **2단계**: 엑셀 순서대로 부모-자식 관계 설정
   - 이렇게 하면 뒤에 있는 판매인도 참조 가능

## 4. 판매인 검색 우선순위
1. 기존 DB에 있는 사용자
2. 같은 엑셀에서 방금 등록한 사용자
3. 이름이 정확히 일치하는 경우 우선
4. loginId로도 검색 (한글 이름이 loginId가 됨)

## 5. 특별 케이스
- **판매인 = "관리자"**: 최상위 관리자의 직속 하위에 배치
- **판매인 = 빈 값**: 부모 없이 독립적으로 존재 (나중에 수동 배치)
- **판매인을 찾을 수 없는 경우**: 경고 로그만 남기고 부모 없이 등록

## 6. 자리가 모두 찬 경우
- 알림 메시지: "OOO님의 좌우 자리가 모두 찼습니다. XXX님은 수동으로 배치해 주세요."
- 해당 사용자는 부모 없이 등록되며, 나중에 관리자가 수동으로 배치

## 7. 등급 업데이트
- 자식이 배치되면 부모의 등급이 자동으로 재계산됨
- F1 → F2: 좌우 자식이 모두 있을 때
- 상위 등급: 하위 조직 규모에 따라 결정